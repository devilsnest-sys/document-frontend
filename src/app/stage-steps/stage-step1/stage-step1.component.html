

<div class="container m-0">
  <!-- <h2 class="text-center">Stage 1-OA</h2> -->


<div class="container mx-auto p-4">
  <div class="po-container">
    <!-- Compact Single Box with Status Legend and PO Details -->
    <div class="unified-card mb-3" *ngIf="poData.length > 0">
      <!-- Status Legend Section -->
      <div class="status-legend">
        <h3 class="legend-title">Status Guide</h3>
        <div class="legend-items">
          <div class="legend-item">
            <span class="legend-indicator status-completed"></span>
            <span class="legend-label">Completed</span>
          </div>
          <div class="legend-item">
            <span class="legend-indicator status-inprogress"></span>
            <span class="legend-label">In Progress</span>
          </div>
          <div class="legend-item">
            <span class="legend-indicator status-pending"></span>
            <span class="legend-label">Pending</span>
          </div>
        </div>
      </div>

      <!-- PO Details Section -->
      <div class="po-details">
        <div class="po-header-inline">
          <h2 class="po-title">Purchase Order</h2>
          <div class="po-badge">{{ poData[0]?.pO_NO || 'N/A' }}</div>
          <div class="action-buttons">
            <button class="btn-icon" (click)="downloadPoFile(poData[0]?.id)" 
              [disabled]="!poData[0]?.poFilePath" title="Download">‚¨á</button>
            <button class="btn-icon btn-primary" (click)="viewPoFile(poData[0]?.id)" title="View">üëÅ</button>
          </div>
        </div>

        <!-- Compact Info Grid -->
        <div class="info-grid">
          <div class="info-item">
            <span class="label">Description:</span>
            <span class="value">{{ poData[0]?.poDescription || 'N/A' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Type:</span>
            <span class="value">{{ poData[0]?.poTypeName || 'N/A' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Incoterms:</span>
            <span class="value">{{ poData[0]?.incotermName || 'N/A' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Contact:</span>
            <span class="value">{{ poData[0]?.contactPersonName || 'N/A' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Contractual:</span>
            <span class="value">{{ poData[0]?.contractualDeliveryDate || 'N/A' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Actual:</span>
            <span class="value">{{ poData[0]?.actualDeliveryDate || 'N/A' }}</span>
          </div>
          <div class="info-item">
            <span class="label">Email:</span>
            <span class="value">
              <a [href]="'mailto:' + poData[0]?.contactPersonEmailId" class="email-link">
                {{ poData[0]?.contactPersonEmailId || 'N/A' }}
              </a>
            </span>
          </div>
          <div class="info-item">
            <span class="label">Phone:</span>
            <span class="value">{{ poData[0]?.contactNo || 'N/A' }}</span>
          </div>
        </div>

        <!-- Document Actions - Inline -->
        <!-- <div class="document-actions-inline">
          <span class="file-name">{{ poData[0]?.poFilePath?.split('\\').pop() || 'No file' }}</span>
          
        </div> -->
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
      <div class="spinner"></div>
      <span>Loading...</span>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="error-state">
      <i class="icon-error">‚ö†</i>
      <span>{{ error }}</span>
    
</div>
<app-document-upload></app-document-upload>
<app-additional-field-flow [stageNumber]="1"></app-additional-field-flow>
<app-staggerd-po *ngIf="!loading && poData[0]?.staggeredOrder === true" [poId]="selectedPoId"
  [stageId]="1"></app-staggerd-po>

<!-- <app-stage-submit *appUserRole="['user']" [stageNumber]="1"></app-stage-submit> -->
<!-- <app-document-upload></app-document-upload> -->